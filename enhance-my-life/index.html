<!doctype html>
<html>
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Level Up</title>

    <link href="../stylesheets/pure-min.css" rel="stylesheet" />
    <link href="../stylesheets/site.css" rel="stylesheet" />
    <script src="../javascripts/site.js"></script>
  </head>

  <body class="enhance-my-life enhance-my-life_index">
    <div class="content-wrapper">
      <div class="content l-box">
        <h1>
  Select an enhancement
</h1>

<form>
  <div class="enhancement">
    <input type="radio" name="enhancement" value="coffee" id="coffee">
      <label for="coffee">Sack Starbucks, brew your own third-wave coffee</label>
    </input>
  </div>

  <div class="enhancement">
    <input type="radio" name="enhancement" value="lunch" id="lunch">
      <label for="lunch">Ditch the deli, bring your own healthy, home-made lunch</label>
    </input>
  </div>

</form>

<a href="../add-to-your-pot/" id="show-me-button" class="visuallyhidden pure-button pure-button-primary">...</a>

<script>

var enhancements = [
  {'id': 'coffee',
   'friendlyName': 'one coffee a day',
   'moneyPerTime': '£3 a day',
   'monthlyAmount': '£60',
   'incomeTenYears': '£33',
   'incomeTwentyYears': '£98',
   'incomeThirtyYears': '£227',
   'imagePath': 'coffee-graph.png',
  },
  {'id': 'lunch',
   'friendlyName': 'lunch a day',
   'moneyPerTime': '£6 a day',
   'monthlyAmount': '£120',
   'incomeTenYears': '£66',
   'incomeTwentyYears': '£197',
   'incomeThirtyYears': '£453',
   'imagePath': 'lunch-graph.png',
  },
];

ready(function() {
  var allRadios = document.getElementsByName('enhancement');

  for(var i = 0; i < allRadios.length; ++i) {
    allRadios[i].addEventListener('click', handleRadioClick);
  }
});

function getEnhancementById(id) {
  for(var i = 0 ; i < enhancements.length; ++i) {
    if(enhancements[i].id == id) {
      return enhancements[i];
    }
  }

  console.error("no enhancement with id `" + id + "`");
}

function handleRadioClick(event) {
  console.log(event.target.value);

  setCurrentEnhancement(getEnhancementById(event.target.value));
}

function setCurrentEnhancement(enhancement) {
  var showMeButton = document.getElementById('show-me-button');

  console.log(enhancement);

  showMeButton.innerHTML = 'Show me how ' + enhancement.moneyPerTime + ' can change my life';

  removeClass(showMeButton, 'visuallyhidden');

  localStorage.setItem("enhancement", JSON.stringify(enhancement));
}

</script>

      </div>
    </div>
  </body>
</html>
