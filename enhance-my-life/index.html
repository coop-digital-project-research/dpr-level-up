<!doctype html>
<html>
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Level Up</title>

    <link href="../stylesheets/pure-min.css" rel="stylesheet" />
    <link href="../stylesheets/site.css" rel="stylesheet" />
    <script src="../javascripts/site.js"></script>
  </head>

  <body class="enhance-my-life enhance-my-life_index">
    <div class="content-wrapper">
      <div class="content l-box">
        <h1>
  Select an enhancement
</h1>

<form>
  <div class="pure-g">
    <div class="pure-u-1-3 enhancement-box">
      <div class="enhancement">
        <input type="radio" name="enhancement" value="coffee" id="coffee">
          <label for="coffee">Make your own coffee, sack Starbucks</label>
        </input>
      </div>
    </div>
    <div class="pure-u-1-3 enhancement-box">
      <div class="enhancement">
        <input type="radio" name="enhancement" value="beer" id="beer">
          <label for="beer">Drink one less beer per week</label>
        </input>
      </div>
    </div>
    <div class="pure-u-1-3 enhancement-box">
      <div class="enhancement">
        <p>Hello</p>
      </div>
    </div>
  </div>
</form>

<img class="visuallyhidden" id="graph-image" style="max-width: 100%" src="images/beer-graph.png"></img>

<a href="../add-to-your-pot/" class="visuallyhidden" id="show-me-button">...</a>

<script>

var enhancements = [
  {'id': 'coffee',
   'friendlyName': 'one coffee each week day',
   'monthlyValue': '£60',
   'imagePath': 'coffee-graph.png',
  },
  {'id': 'beer',
   'friendlyName': 'four beers each weekend',
   'monthlyValue': '£80',
   'imagePath': 'beer-graph.png',
  }
];

ready(function() {
  var allRadios = document.getElementsByName('enhancement');

  for(var i = 0; i < allRadios.length; ++i) {
    allRadios[i].addEventListener('click', handleRadioClick);
  }
});

function getEnhancementById(id) {
  for(var i = 0 ; i < enhancements.length; ++i) {
    if(enhancements[i].id == id) {
      return enhancements[i];
    }
  }

  console.error("no enhancement with id `" + id + "`");
}

function handleRadioClick(event) {
  console.log(event.target.value);

  setCurrentEnhancement(getEnhancementById(event.target.value));
}

function setCurrentEnhancement(enhancement) {
  var showMeButton = document.getElementById('show-me-button'),
      graphImg = document.getElementById('graph-image');

  console.log(enhancement);


  showMeButton.innerHTML = 'Show me how ' + enhancement.monthlyValue + ' a month will enhance my life';
  graphImg.src = '../images/' + enhancement.imagePath;

  removeClass(showMeButton, 'visuallyhidden');
  removeClass(graphImg, 'visuallyhidden');

}

</script>

      </div>
    </div>
  </body>
</html>
